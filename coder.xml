<?xml version="1.0"?>
<Container version="2">
  <Name>Coder</Name>
  <Repository>ghcr.io/ascheel/coder-unraid:v2.28.5</Repository>
  <Registry>https://ghcr.io</Registry>
  <Network>bridge</Network>
  <MyIP/>
  <Shell>sh</Shell>
  <Privileged>false</Privileged>
  <Support>https://github.com/ascheel/coder-unraid</Support>
  <Project>https://coder.com</Project>
  <Overview>Coder enables secure, remote development environments. This template provides a quick-start deployment with built-in database and automatic Docker workspace template import. For production use, configure an external PostgreSQL database via environment variables.</Overview>
  <Category>Development:Development Tools</Category>
  <WebUI>http://[IP]:[PORT:7080]/</WebUI>
  <TemplateURL/>
  <Icon>https://raw.githubusercontent.com/ascheel/coder-unraid/main/assets/coder-dark.png</Icon>
  <ExtraParams>--group-add $(stat -c %g /var/run/docker.sock)</ExtraParams>
  <PostArgs>--address 0.0.0.0:7080</PostArgs>
  <CPUset/>
  <DateInstalled/>
  <DonateText/>
  <DonateLink/>
  <Requires>Docker version 20.10 or higher</Requires>
  <Config
    Name="Coder Access URL"
    Target="CODER_ACCESS_URL"
    Default="http://[IP]:[PORT:7080]/"
    Mode=""
    Description="External URL that users and workspaces will use to connect to Coder. For production, use your domain name with HTTPS."
    Type="Variable"
    Display="always"
    Required="false"
    Mask="false">http://[IP]:[PORT:7080]/</Config>
  <Config
    Name="PostgreSQL Connection URL"
    Target="CODER_PG_CONNECTION_URL"
    Default=""
    Mode=""
    Description="(Optional) External PostgreSQL database connection URL. Format: postgresql://username:password@host:port/database. Leave empty to use built-in database."
    Type="Variable"
    Display="always"
    Required="false"
    Mask="true"/>
  <Config
    Name="HTTP Address"
    Target="CODER_HTTP_ADDRESS"
    Default="0.0.0.0:7080"
    Mode=""
    Description="Address and port for Coder to listen on. Use 0.0.0.0 to listen on all interfaces."
    Type="Variable"
    Display="always"
    Required="false"
    Mask="false">0.0.0.0:7080</Config>
  <Config
    Name="Port 7080"
    Target="7080"
    Default="7080"
    Mode="tcp"
    Description="Coder web interface port"
    Type="Port"
    Display="always"
    Required="true"
    Mask="false">7080</Config>
  <!-- <Config
    Name="Port 3000"
    Target="3000"
    Default="3000"
    Mode="tcp"
    Description="Coder Web Interface port"
    Type="Port"
    Display="always"
    Required="false"
    Mask="false">3000</Config> -->
  <Config
    Name="Coder Data Directory"
    Target="/home/coder/.config"
    Default="/mnt/user/appdata/coder"
    Mode="rw"
    Description="Directory to store Coder configuration and data"
    Type="Path"
    Display="always"
    Required="true"
    Mask="false">/mnt/user/appdata/coder</Config>
  <Config
    Name="Docker Socket"
    Target="/var/run/docker.sock"
    Default="/var/run/docker.sock"
    Mode="ro"
    Description="Docker socket for workspace management"
    Type="Path"
    Display="always"
    Required="true"
    Mask="false">/var/run/docker.sock</Config>
</Container>
